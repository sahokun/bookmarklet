javascript:(async function(){function g(){var a=document.querySelector("div.ammSwapModal__balance").querySelectorAll("p");a=Array.from(a).find(b=>b.textContent.includes("\u6240\u6301\u91cf")).textContent.match(/[\d,]+(\.\d+)?/);if(!a)throw Error("getAmount");return parseFloat(a[0].replace(/,/g,""))}function h(a){const b=document.querySelector(".ammSwapModal__balance"),c=document.createElement("p");c.textContent=`\u6700\u9069\u58f2\u5374\u91cf : ${a}`;c.classList.add("optimal-seller-amount");(a=b.querySelector("p.optimal-seller-amount"))?
a.textContent=c.textContent:b.prepend(c)}function k(){var a=document.querySelector(".ammSwapModal__token");if(!a)throw Error("getMaterial");var b=a.querySelector("img").src.match(/\/(\d{3})\./);b=b?b[1]:null;a=a.querySelector("p").textContent;return{materialId:parseInt(b),materialName:a}}async function l(a,b){a:{for(c of m.tokenPricesMap)if(c[0]===a){var c=c[1].seller.price;break a}c=null}c=Math.floor((Math.floor(c*b)-1)/c*100)/100;0>c&&(c=0);var d=(await window.$nuxt.$store.$laboratoryService.estimateSaleAmount(a,
1E3*b)).amount;if(0===d)throw Error("1GUM\u306b\u6e80\u305f\u306a\u3044");for(var f=0;;){let e=Math.ceil((b+c)/2*100)/100;(await window.$nuxt.$store.$laboratoryService.estimateSaleAmount(a,1E3*e)).amount===d?b=e:c=e;if(Math.ceil(1E3*Math.abs(b-c))/1E3<=Math.ceil(1E3*(.001*e+.0100000001))/1E3)break;if(9===f){alert("\u30eb\u30fc\u30d7\u4e0a\u9650\u8d85\u904e\u4e2d\u65ad");break}f++}return b}const m=await window.$nuxt.$store.$laboratoryService.getAllTokenPrices();try{const a=k(),b=prompt(`${a.materialName} \u5e0c\u671b\u58f2\u5374\u91cf:`,
g());if(isNaN(b))throw Error("isNaN");const c=parseFloat(b);let d=await l(a.materialId,c);h(d);alert(`\u6700\u9069\u58f2\u5374\u91cf: ${d}`)}catch(a){console.log(a),alert(`\u5931\u6557\n\n${a.toString()}`)}})();
